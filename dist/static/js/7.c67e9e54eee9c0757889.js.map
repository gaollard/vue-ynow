{"version":3,"sources":["webpack:///./node_modules/_core-js@2.6.2@core-js/library/modules/es6.object.define-property.js","webpack:///./node_modules/_babel-runtime@6.26.0@babel-runtime/helpers/defineProperty.js","webpack:///src/views/userInfo/index.vue","webpack:///./src/views/userInfo/index.vue?0823","webpack:///./src/views/userInfo/index.vue","webpack:///./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/object/define-property.js","webpack:///./node_modules/_core-js@2.6.2@core-js/library/fn/object/define-property.js"],"names":["$export","__webpack_require__","S","F","defineProperty","f","exports","__esModule","obj","_defineProperty","_defineProperty2","default","key","value","enumerable","configurable","writable","vue_esm","use","nav_bar","field","uploader","userInfo","data","userInfoCache","pickList","token","methods","onClickLeft","this","$router","go","onBlur","ynow","updateUserInfo","defineProperty_default","then","res","errCode","Object","toast","onRead","file","uploadImg","length","doGet7nToken","_this","get7nToken","index","callback","vm","qiniu_min","name","subscribe","next","total","percent","concat","error","_error","complete","console","log","avatar","doCreateProduct","imgs","map","element","url","stringify_default","params","assign_default","form","createXzProduct","doGetUserInfo","_this2","getUserInfo","extends_default","mounted","views_userInfo","render","_vm","_h","$createElement","_c","_self","attrs","title","left-text","left-arrow","on","click-left","_v","staticClass","disabled","required","label","blur","$event","model","$$v","$set","expression","is-link","after-read","src","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","module","$Object","it","desc"],"mappings":"4DAAA,IAAAA,EAAcC,EAAQ,QAEtBD,IAAAE,EAAAF,EAAAG,GAAiCF,EAAQ,QAAgB,UAAcG,eAAiBH,EAAQ,QAAcI,uCCA9GC,EAAAC,YAAA,EAEA,IAIAC,EAJAC,EAAsBR,EAAQ,QAE9BS,GAEAF,EAFAC,IAEsCD,EAAAD,WAAAC,GAAuCG,QAAAH,GAE7EF,EAAAK,QAAA,SAAAH,EAAAI,EAAAC,GAYA,OAXAD,KAAAJ,GACA,EAAAE,EAAAC,SAAAH,EAAAI,GACAC,QACAC,YAAA,EACAC,cAAA,EACAC,UAAA,IAGAR,EAAAI,GAAAC,EAGAL,mTC0BAS,EAAA,QAAAC,IAAAC,EAAA,GACAD,IADAE,EAAA,GAEAF,IAFAG,EAAA,GAIA,IAAAC,GACAC,KADA,WAEA,OACAD,YACAE,iBACAC,YACAC,MAAA,KAGAC,SACAC,YADA,WAEAC,KAAAC,QAAAC,IAAA,IAEAC,OAJA,SAIApB,GAEAiB,KAAAL,cAAAZ,IACAiB,KAAAP,SAAAV,KAAAiB,KAAAL,cAAAZ,IAEQqB,EAAA,EACRC,eADAC,OAEAvB,EAAAiB,KAAAL,cAAAZ,KAEAwB,KAAA,SAAAC,GACA,IAAAA,EAAAC,SACA,aAAA1B,GACc2B,OAAAC,EAAA,EAAAD,CAAd,aAMAE,OAtBA,SAsBAC,GACAb,KAAAJ,SAAA,GAAAiB,EACAb,KAAAc,UAAAd,KAAAJ,SAAAmB,OAAA,EAAAF,SAEAG,aA1BA,WA0BA,IAAAC,EAAAjB,KACMI,EAAA,EAANc,aAAAX,KAAA,SAAAC,GACAS,EAAApB,MAAAW,EAAAd,KAAAG,SAGAiB,UA/BA,SA+BAK,EAAAN,EAAAO,GACA,IAAAC,EAAArB,KACAsB,EAAA,OAAAT,IAAAU,KAAAvB,KAAAH,aACA2B,WACAC,KADA,SACAjB,GACAa,EAAAzB,SAAAuB,GAAA,QAAAX,EAAAkB,MAAAC,QACAN,EAAAzB,YAAAgC,OAAAP,EAAAzB,WAEAiC,MALA,SAKAC,GACUpB,OAAAC,EAAA,EAAAD,CAAVoB,IAEAC,SARA,SAQAvB,GACAwB,QAAAC,IAAAzB,GACAa,EAAAzB,SAAAuB,GAAA,wBAAAX,EAAAzB,IACAsC,EAAAzB,YAAAgC,OAAAP,EAAAzB,UACAyB,EAAA1B,cAAAuC,OAAAb,EAAAzB,SAAAuB,GAAA,IACAE,EAAAlB,OAAA,cAIAgC,gBAnDA,WAoDA,IAAAC,EAAApC,KAAAJ,SAAAyC,IAAA,SAAAC,GAAA,OAAAA,EAAAC,MACAH,EAAAI,IAAAJ,GACA,IAAAK,EAAAC,KAEAN,QAEApC,KAAA2C,MAEMvC,EAAA,EAANwC,gBAAAH,GAAAlC,KAAA,SAAAC,GACQE,OAAAC,EAAA,EAAAD,CAAR,WAGAmC,cAhEA,WAgEA,IAAAC,EAAA9C,KACMI,EAAA,EAAN2C,cAAAxC,KAAA,SAAAC,GACAsC,EAAArD,SAAAe,EAAAd,KACAoD,EAAAnD,cAAAqD,OACAxC,EAAAd,UAKAuD,QAlFA,WAmFAjD,KAAA6C,gBACA7C,KAAAgB,iBCrIekC,GADEC,OAFjB,WAA0B,IAAAC,EAAApD,KAAaqD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,eAAmCE,OAAOC,MAAA,OAAAC,YAAA,KAAAC,aAAA,IAAgDC,IAAKC,aAAAV,EAAArD,eAA8BqD,EAAAW,GAAA,KAAAR,EAAA,OAAwBS,YAAA,YAAsBT,EAAA,kBAAAA,EAAA,aAAuCE,OAAOQ,UAAA,EAAAC,SAAA,GAAAC,MAAA,QAA6CN,IAAKO,KAAA,SAAAC,GAAwBjB,EAAAjD,OAAA,cAAwBmE,OAAQtF,MAAAoE,EAAAzD,cAAA,OAAAyB,SAAA,SAAAmD,GAA0DnB,EAAAoB,KAAApB,EAAAzD,cAAA,SAAA4E,IAA2CE,WAAA,0BAAoCrB,EAAAW,GAAA,KAAAR,EAAA,aAA8BE,OAAOU,MAAA,KAAAD,SAAA,IAA2BL,IAAKO,KAAA,SAAAC,GAAwBjB,EAAAjD,OAAA,cAAwBmE,OAAQtF,MAAAoE,EAAAzD,cAAA,SAAAyB,SAAA,SAAAmD,GAA4DnB,EAAAoB,KAAApB,EAAAzD,cAAA,WAAA4E,IAA6CE,WAAA,4BAAsCrB,EAAAW,GAAA,KAAAR,EAAA,YAA6BE,OAAOC,MAAA,KAAAgB,UAAA,OAA2BnB,EAAA,gBAAsBS,YAAA,aAAAP,OAAgCkB,aAAAvB,EAAAxC,UAAyBwC,EAAAzD,cAAAuC,OAAAqB,EAAA,OAAmES,YAAA,SAAAP,OAA4BmB,IAAAxB,EAAAzD,cAAAuC,WAA/FqB,EAAA,QAAAH,EAAAW,GAAA,SAA+H,qBAE7iCc,oBCCjB,IAcAC,EAdyB1G,EAAQ,OAcjC2G,CACEtF,EACAyD,GATF,EAVA,SAAA8B,GACE5G,EAAQ,SAaV,kBAEA,MAUe6G,EAAA,QAAAH,EAAiB,8BC1BhCI,EAAAzG,SAAkBK,QAAYV,EAAQ,QAA2CM,YAAA,yBCAjFN,EAAQ,QACR,IAAA+G,EAAc/G,EAAQ,QAAqBsC,OAC3CwE,EAAAzG,QAAA,SAAA2G,EAAArG,EAAAsG,GACA,OAAAF,EAAA5G,eAAA6G,EAAArG,EAAAsG","file":"static/js/7.c67e9e54eee9c0757889.js","sourcesContent":["var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_core-js@2.6.2@core-js/library/modules/es6.object.define-property.js\n// module id = SWUO\n// module chunks = 6 7","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (obj, key, value) {\n  if (key in obj) {\n    (0, _defineProperty2.default)(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_babel-runtime@6.26.0@babel-runtime/helpers/defineProperty.js\n// module id = a3Yh\n// module chunks = 6 7","<template>\r\n  <div>\r\n    <van-nav-bar\r\n      title=\"我的资料\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      @click-left=\"onClickLeft\"\r\n    />\r\n    <div class=\"content\">\r\n      <van-cell-group>\r\n        <van-field\r\n          :disabled=\"true\"\r\n          required\r\n          label=\"手机号码\"\r\n          v-model=\"userInfoCache.mobile\"\r\n          @blur=\"onBlur('nickname')\"\r\n        />\r\n        <van-field\r\n          label=\"昵称\"\r\n          required\r\n          v-model=\"userInfoCache.nickname\"\r\n          @blur=\"onBlur('nickname')\"\r\n        />\r\n        <van-cell title=\"头像\" is-link>\r\n          <template>\r\n            <van-uploader class=\"touch-area\" :after-read=\"onRead\">\r\n              <template v-if=\"!userInfoCache.avatar\">\r\n                <span>+</span>\r\n              </template>\r\n              <img class=\"avatar\" v-else :src=\"userInfoCache.avatar\" />\r\n            </van-uploader>\r\n          </template>\r\n        </van-cell>\r\n        <!-- <van-cell title=\"背景图\" value=\"无\" is-link/>\r\n        <van-cell title=\"性别\" :value=\"userInfo.gender==1?'男':'女'\"/>\r\n        <van-cell title=\"电子邮箱\" :value=\"userInfo.email\"/>\r\n        <van-cell title=\"QQ绑定\" value=\"无\"/>\r\n        <van-cell title=\"微信绑定\" value=\"无\"/> -->\r\n      </van-cell-group>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport { NavBar, Field, Toast, Uploader } from 'vant'\r\nimport ynowApi from '../../api/ynow'\r\nimport * as qiniu from 'qiniu-js'\r\nVue.use(NavBar)\r\n  .use(Field)\r\n  .use(Uploader)\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      userInfo: {},\r\n      userInfoCache: {},\r\n      pickList: [],\r\n      token: ''\r\n    }\r\n  },\r\n  methods: {\r\n    onClickLeft () {\r\n      this.$router.go(-1)\r\n    },\r\n    onBlur (key) {\r\n      if (\r\n        this.userInfoCache[key] &&\r\n        this.userInfo[key] !== this.userInfoCache[key]\r\n      ) {\r\n        ynowApi\r\n          .updateUserInfo({\r\n            [key]: this.userInfoCache[key]\r\n          })\r\n          .then(res => {\r\n            if (+res.errCode === 0) {\r\n              if (key === 'nickname') {\r\n                Toast('修改昵称成功')\r\n              }\r\n            }\r\n          })\r\n      }\r\n    },\r\n    onRead (file) {\r\n      this.pickList[0] = file\r\n      this.uploadImg(this.pickList.length - 1, file.file)\r\n    },\r\n    doGet7nToken () {\r\n      ynowApi.get7nToken().then(res => {\r\n        this.token = res.data.token\r\n      })\r\n    },\r\n    uploadImg (index, file, callback) {\r\n      const vm = this\r\n      const observable = qiniu.upload(file, file.name, this.token, {}, {})\r\n      observable.subscribe({\r\n        next (res) {\r\n          vm.pickList[index]['percent'] = res.total.percent\r\n          vm.pickList = [].concat(vm.pickList)\r\n        },\r\n        error (error) {\r\n          Toast(error)\r\n        },\r\n        complete (res) {\r\n          console.log(res)\r\n          vm.pickList[index]['url'] = `//c1.airtlab.com/${res.key}`\r\n          vm.pickList = [].concat(vm.pickList)\r\n          vm.userInfoCache.avatar = vm.pickList[index]['url']\r\n          vm.onBlur('avatar')\r\n        }\r\n      })\r\n    },\r\n    doCreateProduct () {\r\n      let imgs = this.pickList.map(element => element.url)\r\n      imgs = JSON.stringify(imgs)\r\n      const params = Object.assign(\r\n        {\r\n          imgs\r\n        },\r\n        this.form\r\n      )\r\n      ynowApi.createXzProduct(params).then(res => {\r\n        Toast('上传成功')\r\n      })\r\n    },\r\n    doGetUserInfo () {\r\n      ynowApi.getUserInfo().then(res => {\r\n        this.userInfo = res.data\r\n        this.userInfoCache = {\r\n          ...res.data\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.doGetUserInfo()\r\n    this.doGet7nToken()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.touch-area {\r\n  width: 100px;\r\n}\r\n\r\n.avatar {\r\n  width: 40px;\r\n  height: 40px;\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  border-radius: 50%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/userInfo/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"我的资料\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.onClickLeft}}),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('van-cell-group',[_c('van-field',{attrs:{\"disabled\":true,\"required\":\"\",\"label\":\"手机号码\"},on:{\"blur\":function($event){_vm.onBlur('nickname')}},model:{value:(_vm.userInfoCache.mobile),callback:function ($$v) {_vm.$set(_vm.userInfoCache, \"mobile\", $$v)},expression:\"userInfoCache.mobile\"}}),_vm._v(\" \"),_c('van-field',{attrs:{\"label\":\"昵称\",\"required\":\"\"},on:{\"blur\":function($event){_vm.onBlur('nickname')}},model:{value:(_vm.userInfoCache.nickname),callback:function ($$v) {_vm.$set(_vm.userInfoCache, \"nickname\", $$v)},expression:\"userInfoCache.nickname\"}}),_vm._v(\" \"),_c('van-cell',{attrs:{\"title\":\"头像\",\"is-link\":\"\"}},[[_c('van-uploader',{staticClass:\"touch-area\",attrs:{\"after-read\":_vm.onRead}},[(!_vm.userInfoCache.avatar)?[_c('span',[_vm._v(\"+\")])]:_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.userInfoCache.avatar}})],2)]],2)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-6413a7e8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/userInfo/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6413a7e8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6413a7e8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6413a7e8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/userInfo/index.vue\n// module id = null\n// module chunks = ","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/object/define-property.js\n// module id = liLe\n// module chunks = 6 7","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_core-js@2.6.2@core-js/library/fn/object/define-property.js\n// module id = t2Bb\n// module chunks = 6 7"],"sourceRoot":""}