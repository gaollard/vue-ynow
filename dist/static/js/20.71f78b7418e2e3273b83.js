webpackJsonp([20],{NQ0Q:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("lC5x"),a=r.n(n),s=(r("GHWT"),r("1yQd")),i=r("J0Oq"),o=r.n(i),c=r("4YfN"),u=r.n(c),f=(r("TNZe"),r("o0ft")),l=(r("pkmQ"),r("p8HH")),d=(r("4way"),r("lFAY")),m=r("/xf8"),v=r("R4Sj"),p=r("MqhK");m.default.use(f.a).use(l.a).use(d.a);var h={data:function(){return{msgList:[],partnerInfo:null,content:"mock message"}},computed:u()({},Object(v.b)({userInfo:function(t){return t.user.userInfo},list:function(t){var e=this.userInfo.id+"_"+this.$route.params.partnerId,r=[].concat(t.chat.msgObj[e]||[]);return r.sort(function(t,e){return e.create_time<t.create_time?1:e.create_time===t.create_time?0:-1}),r}})),mounted:function(){this.doGetUserProfile()},methods:{doGetUserProfile:function(){var t=this;return o()(a.a.mark(function e(){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.getUserProfile({uid:t.$route.params.partnerId});case 3:0==+(r=e.sent).retCode?t.partnerInfo=r.data:Object(s.a)(r.errMsg),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,t,[[0,7]])}))()},getAvatar:function(t){return this.isFromMe(t)?this.userInfo.avatar:this.partnerInfo.avatar},isFromMe:function(t){return+t.f_from==+this.userInfo.id},itemCls:function(t){return this.isFromMe(t)?"item-mine":"item-partner"},doSendMsg:function(){this.$store.dispatch("chat/sendMsg",{to:this.$route.params.partnerId,content:this.content})}}},_={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.partnerInfo?r("div",{staticClass:"view"},[r("van-nav-bar",{attrs:{title:t.partnerInfo.nickname||t.partnerInfo.mobile,"left-text":"返回","left-arrow":""},on:{"click-left":function(e){t.$router.go(-1)}}}),t._v(" "),r("div",{staticClass:"list content"},t._l(t.list,function(e){return r("div",{key:e.id,staticClass:"item",class:t.itemCls(e),attrs:{"data-from":e.from,"data-to":e.to},on:{click:function(r){t.$router.push("/chatItem/"+e.id)}}},[r("img",{staticClass:"item-avatar",attrs:{src:t.getAvatar(e),alt:"头像"}}),t._v(" "),r("div",{staticClass:"item-name"},[t._v(t._s(e.content))])])}),0),t._v(" "),r("div",{staticClass:"btm-fixed"},[r("div",{staticClass:"form"},[r("van-field",{staticClass:"form-input",attrs:{placeholder:"请输入用户名"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),r("van-button",{staticClass:"form-submit",attrs:{type:"primary"},on:{click:t.doSendMsg}},[t._v("发送")])],1)])],1):t._e()},staticRenderFns:[]};var I=r("C7Lr")(h,_,!1,function(t){r("i4Jo")},"data-v-22f5abf4",null);e.default=I.exports},i4Jo:function(t,e){}});
//# sourceMappingURL=20.71f78b7418e2e3273b83.js.map