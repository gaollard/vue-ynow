webpackJsonp([16],{0:function(t,e){},"3wqn":function(t,e){},"4ye5":function(t,e){},ANVo:function(t,e){},HiBx:function(t,e){},MqhK:function(t,e,n){"use strict";var a=n("T/88"),i=n("rVsN"),o=n.n(i),r=n("6iV/"),s=n.n(r),c=n("aozt"),u=n.n(c),l=n("uAC3"),d=n.n(l),v=n("kIhv"),f=n.n(v);u.a.interceptors.request.use(function(t){var e=d.a.get("token")||"",n=new f.a(t.url,!0);return n.query.token=e,t.url=n.toString(),t.data||(t.data={}),"post"===t.method&&(t.data=s.a.stringify(t.data),t.headers["Content-Type"]="application/x-www-form-urlencoded"),t},function(t){return o.a.reject(t)}),u.a.interceptors.response.use(function(t){return t.data},function(t){return o.a.reject(t)});var m=u.a;e.a={get7nToken:function(){return m.get(a.a+"/upload/getToken")},login:function(t){var e=t.mobile,n=t.password;return m.post(a.a+"/user/login",{mobile:e,password:n})},getUserInfo:function(){return m.get(a.a+"/user/userInfo")},getCheckinStatus:function(){return m.get(a.a+"/checkin")},checkin:function(){return m.post(a.a+"/checkin")},getCheckinList:function(){return m.get(a.a+"/checkin/list")},getPointList:function(){return m.get(a.a+"/point/list")},getdeliveryAddressList:function(){return m.get(a.a+"/deliveryAddress")},getDemandList:function(){return m.get(a.a+"/demand")},getXzProductList:function(){return m.get(a.a+"/xzProduct")},getXzProductItem:function(t){return m.get(a.a+"/xzProduct/"+t)},createXzProduct:function(t){return m.post(a.a+"/xzProduct/",t)},getXzCategorytList:function(){return m.get(a.a+"/xzCategory")},getXzProductCollect:function(t){var e=t.typeId,n=void 0===e?1:e;return m.get(a.a+"/xzProductCollect?typeId="+n)},createXzProductCollect:function(t){var e=t.itemId,n=t.typeId,i=void 0===n?1:n;return m.post(a.a+"/xzProductCollect?typeId="+i,{itemId:e})},deleteXzProductCollect:function(t){var e=t.recordId,n=t.itemId,i=t.typeId,o=void 0===i?1:i;return m.delete(a.a+"/xzProductCollect/"+e+"?typeId="+o+"&itemId="+n)},getXzProductCollectState:function(t){var e=t.itemId,n=t.typeId,i=void 0===n?1:n;return m.get(a.a+"/user/xzProductCollectState/"+e+"?typeId="+i)},getChatList:function(){return m.get(a.a+"/chat")},getChatItem:function(t){var e=t.partnerId;return m.get(a.a+"/chat/"+e)}}},"T/88":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a="http://ynowapi.airtlab.com",i="ws://ynowapi.airtlab.com:8001"},"X+nr":function(t,e){},hU59:function(t,e){},nzb2:function(t,e){},qSXp:function(t,e){},x35b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("/xf8"),i=(n("62ux"),n("Y+un")),o=(n("fQ6+"),n("cRJE"));a.default.use(i.a).use(o.a);var r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("van-tabbar",{directives:[{name:"show",rawName:"v-show",value:t.$route.meta.tabbar,expression:"$route.meta.tabbar"}],staticClass:"tabbar",on:{change:t.handleChange},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[n("van-tabbar-item",{attrs:{icon:"home-o",to:"/"}},[t._v("闲鸭")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"apps-o",to:"/category"}},[t._v("分类")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"fire-o",to:"/auction"}},[t._v("竞拍")]),t._v(" "),n("van-tabbar-item",{attrs:{info:"5",icon:"chat-o",to:"/chat"}},[t._v("消息")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"manager-o",to:"/account"}},[t._v("我的")])],1),t._v(" "),n("router-view",{staticClass:"view",class:[{"has-tabbar":t.$route.meta.tabbar},t.$route.name]})],1)},staticRenderFns:[]};var s=n("C7Lr")({name:"App",data:function(){return{activeIndex:0}},methods:{handleChange:function(t){this.activeIndex=t}},mounted:function(){this.$store.dispatch("chat/initSocket"),this.$store.dispatch("chat/getChatList")}},r,!1,function(t){n("ymQv")},"data-v-5ea9ca76",null).exports,c=n("KGCO"),u=n("MqhK"),l={data:function(){return{userInfo:null,checkinStatus:!0}},mounted:function(){this.doGetUserInfo(),this.doGetCheckInStatus()},methods:{doGetCheckInStatus:function(){var t=this;u.a.getCheckinStatus().then(function(e){t.checkinStatus=1==+e.data.status})},doGetUserInfo:function(){var t=this;u.a.getUserInfo().then(function(e){t.userInfo=e.data})},handleCheckin:function(){var t=this;this.checkinStatus?this.$router.push("/checkin"):u.a.checkin().then(function(e){t.doGetCheckInStatus(),t.$router.push("/checkin")})}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view-account"},[n("div",{staticClass:"card-cover"},[t.userInfo?[n("img",{staticClass:"avatar",attrs:{src:t.userInfo.avatar}}),t._v(" "),n("div",{staticClass:"profile"},[n("div",{staticClass:"nickname"},[t._v(t._s(t.userInfo.nickname))]),t._v(" "),n("div",{staticClass:"mobile"},[t._v(t._s(t.userInfo.mobile))])]),t._v(" "),n("div",{staticClass:"btn-checkin"},[n("span",{on:{click:t.handleCheckin}},[t._v(t._s(t.checkinStatus?"已签到":"签到"))])])]:[n("div",[t._v("加载中...")])]],2),t._v(" "),n("div",{staticClass:"card-menu"},[n("router-link",{attrs:{to:"/follow"}},[t._v("关注")]),t._v(" "),n("router-link",{attrs:{to:"/collect"}},[t._v("收藏")]),t._v(" "),n("router-link",{attrs:{to:"/like"}},[t._v("喜欢")]),t._v(" "),n("router-link",{attrs:{to:"/point"}},[t._v("积分")]),t._v(" "),n("router-link",{attrs:{to:"/order"}},[t._v("订单")])],1),t._v(" "),n("div",{staticClass:"card-link"},[n("van-cell",{attrs:{title:"发布宝贝",to:"/xzProductCreate"}}),t._v(" "),n("van-cell",{attrs:{title:"我的发布",to:"/myProdcust"}}),t._v(" "),n("van-cell",{attrs:{title:"地址管理",to:"/DeliveryAddress"}}),t._v(" "),n("van-cell",{attrs:{title:"账户设置",to:"/userInfo"}}),t._v(" "),n("van-cell",{attrs:{title:"立即登录",to:"/login"}})],1),t._v(" "),n("div",{staticClass:"join-us"},[t._v("本站属于EggJS练习，大部分模块正在建设，欢迎你的加入")])])},staticRenderFns:[]};var v=n("C7Lr")(l,d,!1,function(t){n("ANVo")},"data-v-82ba63dc",null).exports,f=(n("4way"),n("lFAY"));a.default.use(f.a);var m={data:function(){return{list:[]}},mounted:function(){var t=this;u.a.getdeliveryAddressList().then(function(e){t.list=e.data.list})},methods:{onClickLeft:function(){this.$router.go(-1)}}},h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view-deliveryAddress"},[n("van-nav-bar",{attrs:{title:"收货地址","left-text":"返回","left-arrow":""},on:{"click-left":t.onClickLeft}}),t._v(" "),n("ul",{staticClass:"list"},t._l(t.list,function(e,a){return n("li",{key:a,staticClass:"item"},[n("div",{staticClass:"item__hd"},[n("span",{staticClass:"username"},[t._v(t._s(e.username))]),t._v(" "),n("span",{staticClass:"mobile"},[t._v(t._s(e.mobile))]),t._v(" "),n("span",{staticClass:"remark"},[t._v("公司")])]),t._v(" "),n("div",{staticClass:"item__bd"},[n("span",[t._v(t._s(e.province))]),t._v(" "),n("span",[t._v(t._s(e.city))]),t._v(" "),n("span",[t._v(t._s(e.district))]),t._v(" "),n("span",[t._v(t._s(e.address))])]),t._v(" "),t._m(0,!0)])}),0),t._v(" "),t._m(1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item__ft"},[e("button",{staticClass:"btn btn-detail"},[this._v("修改地址")]),this._v(" "),e("button",{staticClass:"btn btn-remove"},[this._v("删除地址")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bottom-fixed"},[e("button",{staticClass:"btn"},[this._v("新建收货地址")])])}]};var _=n("C7Lr")(m,h,!1,function(t){n("X+nr")},"data-v-3dfaf03b",null).exports,p=n("GEjq"),g=n("ZpOW"),b=n.n(g),C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.list=null,e}return p.c(e,t),e.prototype.mounted=function(){var t=this;u.a.getDemandList().then(function(e){t.list=e.data.list})},e=p.b([b.a],e)}(a.default),k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view"},[t._m(0),t._v(" "),n("ul",{staticClass:"demand-list"},t._l(t.list,function(e,a){return n("li",{key:a,staticClass:"demand-item"},[n("div",{staticClass:"demand-item__hd"},[n("span",{staticClass:"username"},[t._v(t._s(e.title))])]),t._v(" "),n("div",{staticClass:"demand-item__bd"},[t._v(t._s(e.description))]),t._v(" "),n("div",{staticClass:"demand-item__ft"})])}),0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"filter"},[e("ul",[e("li",[this._v("赏金")]),this._v(" "),e("li",[this._v("类别")]),this._v(" "),e("li",[this._v("信用")]),this._v(" "),e("li",[this._v("地区")])])])}]};var I=n("C7Lr")(C,k,!1,function(t){n("ybSS")},"data-v-b0c57362",null).exports;a.default.use(c.a);var y=new c.a({mode:"history",routes:[{path:"/",name:"welcome",component:function(){return n.e(1).then(n.bind(null,"Dgg9"))},meta:{tabbar:!0}},{path:"/Welcome",name:"Welcome",component:function(){return n.e(12).then(n.bind(null,"ZO6g"))}},{path:"/Account",name:"Account",component:v,meta:{tabbar:!0}},{path:"/DeliveryAddress",name:"DeliveryAddress",component:_},{path:"/Demand",name:"Demand",component:I},{path:"/Login",name:"Login",component:function(){return n.e(9).then(n.bind(null,"T+/8"))}},{path:"/Point",name:"Point",component:function(){return n.e(14).then(n.bind(null,"4fZK"))}},{path:"/category",name:"category",component:function(){return n.e(8).then(n.bind(null,"RSVL"))},meta:{tabbar:!0}},{path:"/checkin",name:"checkin",component:function(){return n.e(10).then(n.bind(null,"vEgj"))}},{path:"/xzProduct",name:"xzProduct",component:function(){return n.e(1).then(n.bind(null,"Dgg9"))},meta:{tabbar:!0}},{path:"/xzProductItem/:itemId",name:"xzProductItem",component:function(){return n.e(3).then(n.bind(null,"UmRu"))}},{path:"/auction",name:"auction",component:function(){return n.e(13).then(n.bind(null,"tnjb"))},meta:{tabbar:!0}},{path:"/userInfo",name:"userInfo",component:function(){return n.e(11).then(n.bind(null,"eSIO"))}},{path:"/collect",name:"collect",component:function(){return n.e(7).then(n.bind(null,"vi7c"))}},{path:"/xzProductCreate",name:"xzProductCreate",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"oW1Z"))}},{path:"/chat",name:"chat",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"HVFi"))},meta:{tabbar:!0}},{path:"/chatItem/:partnerId",name:"chatItem",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"NQ0Q"))}},{path:"*",component:function(){return n.e(5).then(n.bind(null,"51AI"))}}]}),x=n("R4Sj"),L=n("MgeX"),P=n.n(L),w=n("a7o1"),z=n.n(w),S=n("nUeE"),A=n.n(S),$=n("T/88"),j=console.log,E=A.a.get("userInfo"),M=null,X={namespaced:!0,state:function(){return{userList:[],msgList:[],msgObj:{}}},getters:{},mutations:{getAllMsg:function(t,e){var n=e.userList,a=e.msgList,i=e.msgObj;t.userList=n,t.msgList=a,t.msgObj=i}},actions:{initSocket:function(t){var e=t.dispatch,n=z()($.b,{query:{room:"demo",token:E.token||Math.random()},transports:["websocket"]});n.on("res",function(t){console.log("res f_from server: %s!",t)}),n.on("connect",function(){var t=n.id;j("#connect,",t,n),n.on("sendMsg",function(t){console.log(t),e("getChatList")})}),n.on("receiveAllMsg",function(t){j("#receiveAllMsg,",t)}),n.on("online",function(t){j("#online,",t)}),n.on("disconnect",function(t){j("#disconnect",t)}),n.on("disconnecting",function(){j("#disconnecting")}),n.on("error",function(){j("#error")}),M=n},getChatList:function(t){t.state;var e=t.commit;u.a.getChatList().then(function(t){var n=t.data.msgList,a=t.data.userList,i={};function o(t,e){return e.create_time>t.create_time?1:e.create_time===t.create_time?0:-1}n.forEach(function(t){var e=void 0;e=+t.f_from==+E.id?E.id+"_"+t.f_to:E.id+"_"+t.f_from;var n=t.f_from+"_"+t.f_to,a=t.f_to+"_"+t.f_from;e!==n&&e!==a||(i[e]||(i[e]=[]),i[e]&&i[e].push(t))}),P()(i).forEach(function(t){t.sort(o)}),a.sort(function(t,e){var n=E.id+"_"+t.id,a=E.id+"_"+e.id;return o(i[n][0],i[a][0])}),e("getAllMsg",{msgObj:i,msgList:n,userList:a})})},sendMsg:function(t,e){t.state,t.commit;var n={to:e.to,content:e.content,from:E.id};console.log(n),M.emit("sendMsg",{payload:n})}}};a.default.use(x.a);var D=new x.a.Store({state:{},getters:{},mutations:{},actions:{},modules:{chat:X}}),O=n("0Fdj");n("nzb2"),n("HiBx");a.default.use(O.b).use(O.f).use(O.c).use(O.j).use(O.k).use(O.d).use(O.i).use(O.e),a.default.config.productionTip=!1,new a.default({el:"#app",store:D,router:y,components:{App:s},template:"<App/>"}).$mount("#app")},ybSS:function(t,e){},ymQv:function(t,e){}},["x35b"]);
//# sourceMappingURL=app.9064779519f7fb333b34.js.map